package com.jsp.DAO;

import java.util.List;

import com.jsp.Entity.Passport;
import com.jsp.Entity.Person;

import jakarta.persistence.EntityManager;
import jakarta.persistence.EntityManagerFactory;
import jakarta.persistence.Persistence;

public class OneToOneDAO {
	
	private EntityManagerFactory emf = Persistence.createEntityManagerFactory("PersonPU");
	
	public void savePerson(Person person) {
		EntityManager em = emf.createEntityManager();
		em.getTransaction().begin();
		em.persist(person);
		em.getTransaction().commit();
		em.close();
	}
	
	public void savePassport(Passport passport) {
		EntityManager em = emf.createEntityManager();
		em.getTransaction().begin();
		em.persist(passport);
		em.getTransaction().commit();
		em.close();
	}
	
	public Passport findPassportById(int id) {
		EntityManager em = emf.createEntityManager();
		Passport pass = em.find(Passport.class, id);
		em.close();
		return pass;
	}
	
	public Person findPersonById(int id) {
		EntityManager em = emf.createEntityManager();
		Person person = em.find(Person.class, id);
		em.close();
		return person;
	}
	
	public List<Person> findAllPersons(){
		EntityManager em = emf.createEntityManager();
		List<Person> list = em.createQuery("FROM Person").getResultList();
		return list;
	}
	
	public void updatePerson(Person person) {
		EntityManager em = emf.createEntityManager();
		em.getTransaction().begin();
		em.merge(person);
		em.getTransaction().commit();
		em.close();
	}
	
	public void deletePerson(int id) {
		EntityManager em = emf.createEntityManager();
		em.getTransaction().begin();
		Person person = em.find(Person.class, id);
		if(person != null) {
			em.remove(person);
		}
		em.getTransaction().commit();
		em.close();
	}

}
